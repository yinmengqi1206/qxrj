{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA","file":"index.js","sourcesContent":["var r=require(\"@lspriv/wx-calendar/lib\");const t=[0,4,173,8,90,1,213,84,180,9,100,5,89,69,149,10,166,4,85,36,173,8,90,98,218,4,180,5,180,85,82,13,148,10,74,42,86,2,109,113,109,1,218,2,210,82,169,5,73,13,42,69,43,9,86,1,181,32,109,1,89,105,212,10,168,5,169,86,165,4,43,9,158,56,182,8,236,116,108,5,212,10,228,106,82,5,149,10,90,66,91,4,182,4,180,34,106,5,82,117,201,10,82,5,53,85,77,10,90,2,93,49,181,2,106,138,104,5,169,10,138,106,42,5,45,9,170,72,90,1,181,9,176,57,100,5,37,117,149,10,150,4,77,84,173,4,218,4,212,68,180,5,84,133,82,13,146,10,86,106,86,2,109,2,106,65,218,2,178,161,169,5,73,13,10,109,42,9,86,1,173,80,109,1,217,2,209,58,168,5,41,133,165,12,42,9,150,84,182,8,108,9,100,69,212,10,164,5,81,37,149,10,42,114,91,4,182,4,172,82,106,5,210,10,162,74,74,5,85,148,45,10,90,2,117,97,181,2,106,3,97,69,169,10,74,5,37,37,45,9,154,104,218,8,180,9,168,89,84,3,165,10,145,58,150,4,173,176,173,4,218,4,244,98,180,5,84,11,68,93,82,10,149,4,85,34,109,2,90,113,218,2,170,5,178,85,73,11,74,10,45,57,54,1,109,128,109,1,217,2,233,106,168,5,41,11,154,76,170,8,182,8,180,56,108,9,84,117,212,10,164,5,69,85,149,10,154,4,85,68,181,4,106,130,106,5,210,10,146,106,74,5,85,10,42,74,90,2,181,2,178,49,105,3,49,115,169,10,74,5,45,85,45,9,90,1,213,72,180,9,104,137,84,11,164,10,165,106,149,4,173,8,106,68,218,4,116,5,176,37,84,3],o=[6,14,19,25,33,36,38,41,44,52,55,79,117,136,147,150,155,158,185,193],n=[[7,6,6,6,6,6,6,6,6,5,6,6,6,5,5,6,6,5,5,5,5,5,5,5,5,4,5,5],[5,4,5,5,5,4,4,5,5,4,4,4,4,4,4,4,4,3,4,4,4,3,3,4,4,3,3,3],[6,6,6,7,6,6,6,6,5,6,6,6,5,5,6,6,5,5,5,6,5,5,5,5,4,5,5,5,5],[5,5,6,6,5,5,5,6,5,5,5,5,4,5,5,5,4,4,5,5,4,4,4,5,4,4,4,4,5],[6,6,6,7,6,6,6,6,5,6,6,6,5,5,6,6,5,5,5,6,5,5,5,5,4,5,5,5,5],[6,6,7,7,6,6,6,7,6,6,6,6,5,6,6,6,5,5,6,6,5,5,5,6,5,5,5,5,4,5,5,5,5],[7,8,8,8,7,7,8,8,7,7,7,8,7,7,7,7,6,7,7,7,6,6,7,7,6,6,6,7,7],[8,8,8,9,8,8,8,8,7,8,8,8,7,7,8,8,7,7,7,8,7,7,7,7,6,7,7,7,6,6,7,7,7],[8,8,8,9,8,8,8,8,7,8,8,8,7,7,8,8,7,7,7,8,7,7,7,7,6,7,7,7,7],[9,9,9,9,8,9,9,9,8,8,9,9,8,8,8,9,8,8,8,8,7,8,8,8,7,7,8,8,8],[8,8,8,8,7,8,8,8,7,7,8,8,7,7,7,8,7,7,7,7,6,7,7,7,6,6,7,7,7],[7,8,8,8,7,7,8,8,7,7,7,8,7,7,7,7,6,7,7,7,6,6,7,7,6,6,6,7,7]],e=[[13,49,85,117,149,185,201,250,250],[13,45,81,117,149,185,201,250,250],[13,48,84,112,148,184,200,201,250],[13,45,76,108,140,172,200,201,250],[13,44,72,104,132,168,200,201,250],[5,33,68,96,124,152,188,200,201],[29,57,85,120,148,176,200,201,250],[13,48,76,104,132,168,196,200,201],[25,60,88,120,148,184,200,201,250],[16,44,76,108,144,172,200,201,250],[28,60,92,124,160,192,200,201,250],[17,53,85,124,156,188,200,201,250]],l=[[21,21,21,21,21,20,21,21,21,20,20,21,21,20,20,20,20,20,20,20,20,19,20,20,20,19,19,20],[20,19,19,20,20,19,19,19,19,19,19,19,19,18,19,19,19,18,18,19,19,18,18,18,18,18,18,18],[21,21,21,22,21,21,21,21,20,21,21,21,20,20,21,21,20,20,20,21,20,20,20,20,19,20,20,20,20],[20,21,21,21,20,20,21,21,20,20,20,21,20,20,20,20,19,20,20,20,19,19,20,20,19,19,19,20,20],[21,22,22,22,21,21,22,22,21,21,21,22,21,21,21,21,20,21,21,21,20,20,21,21,20,20,20,21,21],[22,22,22,22,21,22,22,22,21,21,22,22,21,21,21,22,21,21,21,21,20,21,21,21,20,20,21,21,21],[23,23,24,24,23,23,23,24,23,23,23,23,22,23,23,23,22,22,23,23,22,22,22,23,22,22,22,22,23],[23,24,24,24,23,23,24,24,23,23,23,24,23,23,23,23,22,23,23,23,22,22,23,23,22,22,22,23,23],[23,24,24,24,23,23,24,24,23,23,23,24,23,23,23,23,22,23,23,23,22,22,23,23,22,22,22,23,23],[24,24,24,24,23,24,24,24,23,23,24,24,23,23,23,24,23,23,23,23,22,23,23,23,22,22,23,23,23],[23,23,23,23,22,23,23,23,22,22,23,23,22,22,22,23,22,22,22,22,21,22,22,22,21,21,22,22,22],[22,22,23,23,22,22,22,23,22,22,22,22,21,22,22,22,21,21,22,22,21,21,21,22,21,21,21,21,22]],a=[[13,45,81,113,149,185,201],[21,57,93,125,161,193,201],[21,56,88,120,152,188,200,201],[21,49,81,116,144,176,200,201],[17,49,77,112,140,168,200,201],[28,60,88,116,148,180,200,201],[25,53,84,112,144,172,200,201],[29,57,89,120,148,180,200,201],[17,45,73,108,140,168,200,201],[28,60,92,124,160,192,200,201],[16,44,80,112,148,180,200,201],[17,53,88,120,156,188,200,201]],s=\"正二三四五六七八九十冬腊\",i=[\"大寒\",\"雨水\",\"春分\",\"谷雨\",\"小满\",\"夏至\",\"大暑\",\"处暑\",\"秋分\",\"霜降\",\"小雪\",\"冬至\"],c=[\"小寒\",\"立春\",\"惊蛰\",\"清明\",\"立夏\",\"芒种\",\"小暑\",\"立秋\",\"白露\",\"寒露\",\"立冬\",\"大雪\"],u=\"〇一二三四五六七八九十\",h=1901,y=1,d=1,f=0,m=4597,C=11,p=11,v=[{solar:c[2],year:2014,month:3,wrong:5,correct:6},{solar:i[2],year:2051,month:3,wrong:21,correct:20},{solar:c[1],year:2083,month:2,wrong:4,correct:3},{solar:i[2],year:2084,month:3,wrong:20,correct:19},{solar:c[5],year:2094,month:6,wrong:6,correct:5}],M=(r,t,o)=>{const n=`${r}`.padStart(4,\"0\"),e=`${t}`.padStart(2,\"0\"),l=`${o}`.padStart(2,\"0\");return new Date(`${n}-${e}-${l}T00:00:00Z`)};class A{static lunar(r,t,o){if(r<1901||r>2100)return null;const n=A.reviseSolarTerm(r,t,o);let e,l,a=h,u=y,f=d,v=m,T=C,_=p;r>=2e3&&(a=h+99,u=1,f=1,v=m+99,T=11,_=25);const D=M(a,u,f);_+=(+M(r,t,o)-+D)/864e5;let g=A.cnMonthDays(v,T),N=A.nextCnMonth(v,T);for(;_>g;)Math.abs(N)<Math.abs(T)&&v++,T=N,_-=g,g=A.cnMonthDays(v,T),N=A.nextCnMonth(v,T);e=A.sectionalTerm(r,t),l=A.principleTerm(r,t);let Y=A.lunarDay(_),$=\"\";return o===e?$=c[t-1]:o===l?$=i[t-1]:1===_&&T>0?Y=s[T-1]+\"月\":1===_&&T<0&&(Y=`闰${s[-T-1]}月`),!0===n?$=\"\":n&&($=n),{year:v,month:T,day:_,lunarYear:A.lunarYear(v),lunarMonth:A.lunarMonth(T),lunarDay:Y,solar:$}}static sectionalTerm(r,t){if(r<1901||r>2100)return 0;let o=0;const l=r-h+1;for(;l>=e[t-1][o];)o++;return n[t-1][4*o+l%4]}static principleTerm(r,t){if(r<1901||r>2100)return 0;let o=0;const n=r-h+1;for(;n>=a[t-1][o];)o++;return l[t-1][4*o+n%4]}static reviseSolarTerm(r,t,o){const n=v.find((t=>t.year==r));if((null==n?void 0:n.month)===t){if(n.wrong===o)return!0;if(n.correct===o)return n.solar}return!1}static lunarYear(r){return r?\"甲乙丙丁戊己庚辛壬癸\"[(r-1)%10]+\"子丑寅卯辰巳午未申酉戌亥\"[(r-1)%12]+\"鼠牛虎兔龙蛇马羊猴鸡狗猪\"[(r-1)%12]+\"年\":\"\"}static lunarMonth(r){return null==r?\"\":r>0?`${s[r-1]}月`:`闰${s[-r-1]}月`}static lunarDay(r){return r?r>0&&r<=10?`初${u[r]}`:r<20?`十${u[r%10]}`:20==r?\"二十\":r<30?`廿${u[r%10]}`:30===r?\"三十\":\"\":\"\"}static nextCnMonth(r,o){let n=Math.abs(o)+1;if(o>0){let e=t[2*(r-m+f)+1];e=e>>4&15,e==o&&(n=-o)}return 13==n&&(n=1),n}static cnMonthDays(r,n){const e=r-m+f;let l=0,a=0,s=30;if(1<=n&&n<=8)l=t[2*e],a=n-1,1==(l>>a&1)&&(s=29);else if(9<=n&&n<=12)l=t[2*e+1],a=n-9,1==(l>>a&1)&&(s=29);else if(l=t[2*e+1],l=l>>4&15,l!=Math.abs(n))s=0;else{s=29;for(let r=0;r<o.length;r++)if(o[r]==e){s=30;break}}return s}}class T{constructor(r){this.style=\"\",this.PRINTER_ALWAYS_DATE_MARK=!0,this.hasDefFdColor=!!(null==r?void 0:r.fdColor),this.options={markColor:(null==r?void 0:r.markColor)||\"var(--wc-solar-color)\",nyColor:(null==r?void 0:r.nyColor)||\"#F56C6C\",fdColor:(null==r?void 0:r.fdColor)||\"#409EFF\"}}PLUGIN_ON_INITIALIZE(r){this.service=r}getFdColor(t){return this.hasDefFdColor||t===this.style||(this.style=t,this.options.fdColor=r.getStyle(t,\"--wc-primary\")||this.options.fdColor),this.options.fdColor}getLunar(r){return A.lunar(r.year,r.month,r.day)}PLUGIN_TRACK_DATE(r){const t=A.lunar(r.year,r.month,r.day);return{festival:{text:(null==t?void 0:t.solar)||(null==t?void 0:t.lunarDay)||\"\",style:{color:(null==t?void 0:t.solar)?this.options.markColor:\"\"}}}}PLUGIN_TRACK_YEAR(t){let o=\"\";const n=new Map,{nyColor:e}=this.options,l=this.getFdColor(this.service.component.data.style);for(let a=0;a<12;a++){const s=1===a&&r.isLeapYear(t.year)?r.GREGORIAN_MONTH_DAYS[a]+1:r.GREGORIAN_MONTH_DAYS[a],i=a+1;for(let a=0;a<s;a++){const s=a+1,c=A.lunar(t.year,i,s);if(10===i&&1===s&&(o=(null==c?void 0:c.lunarYear)||\"\"),1===(null==c?void 0:c.day)){const t=r.getAnnualMarkKey({month:i,day:s}),o={};o.sub=1===(null==c?void 0:c.month)?e:l,n.set(t,o)}}}return{subinfo:[{text:o,color:e},{text:\"农历初一\",color:l}],marks:n}}}T.KEY=\"lunar\";const _=T.KEY;exports.LUNAR_PLUGIN_KEY=_,exports.LunarPlugin=T;\n"]}