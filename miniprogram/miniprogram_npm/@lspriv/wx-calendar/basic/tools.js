"use strict";var t=this&&this.__awaiter||function(e,n,l,a){return new(l=l||Promise)(function(r,t){function o(e){try{i(a.next(e))}catch(e){t(e)}}function s(e){try{i(a.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof l?t:new l(function(e){e(t)})).then(o,s)}i((a=a.apply(e,n||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0}),exports.warn=exports.hasLayoutArea=exports.addLayoutHideCls=exports.layoutHideCls=exports.onceEmitter=exports.mergeStr=exports.viewportOffset=exports.nodeRect=exports.clearAnimated=exports.applyAnimated=exports.severalTicks=exports.nextTick=exports.easingOpt=exports.InitWeeks=exports.InitPanels=exports.circularDiff=exports.isSkyline=exports.middle=exports.flagView=exports.isView=exports.viewFlag=void 0;let s=require("./constants"),r=require("../utils/shared"),e=e=>{e=e||s.VIEWS.MONTH,e=(0,r.values)(s.VIEWS).indexOf(e);return e<0?s.View.month:1<<e},o=(exports.viewFlag=e,e=>e===s.View.week||e===s.View.month||e===s.View.schedule),i=(exports.isView=o,e=>(0,r.values)(s.VIEWS)[Math.log2(e)]),n=(exports.flagView=i,e=>e>>1),l=(exports.middle=n,e=>"skyline"===e),a=(exports.isSkyline=l,(e,t)=>{var r=Math.floor(s.CALENDAR_PANELS/2);return e<t-r&&(e+=s.CALENDAR_PANELS),t+r<e&&(e-=s.CALENDAR_PANELS),e-t}),p=(exports.circularDiff=a,(r,o={})=>Array.from({length:s.CALENDAR_PANELS},(e,t)=>Object.assign({key:r+"_"+t},o))),x=(exports.InitPanels=p,(r=s.WEEKS,o="w")=>Array.from({length:r.length},(e,t)=>({key:o+"_"+t,label:r[t]}))),c=(exports.InitWeeks=x,(e,t=wx.worklet.Easing.out(wx.worklet.Easing.sin))=>({duration:e,easing:t})),u=(exports.easingOpt=c,t=>new Promise(e=>{wx.nextTick(()=>{e(null==t?void 0:t())})})),d=(exports.nextTick=u,e=>t(void 0,void 0,void 0,function*(){for(;e--;)yield(0,exports.nextTick)()})),w=(exports.severalTicks=d,(e,r,o,s)=>new Promise(t=>{e.applyAnimatedStyle(r,o,s,e=>{t(e.styleId)})})),f=(exports.applyAnimated=w,(t,r,o)=>new Promise(e=>{t.clearAnimatedStyle(r,o,()=>{e()})})),y=(exports.clearAnimated=f,e=>{let s=e.createSelectorQuery().in(e);return o=>new Promise((t,r)=>{s.selectAll(o).boundingClientRect(e=>{e.length?t(e):r("view not found by selector "+o)}).exec()})}),m=(exports.nodeRect=y,t=>new Promise(e=>{t.createSelectorQuery().selectViewport().scrollOffset(e).exec()})),A=(exports.viewportOffset=m,(e,t=",")=>e.flatMap(e=>e.split(t).map(e=>e.trim())).join(t)),g=(exports.mergeStr=A,(t,r)=>{let o=0;return{emit:function(...e){o++||t.triggerEvent(r,...e)},cancel:function(){o++}}}),h=(exports.onceEmitter=g,t=>null!=t&&t.length?s.FULL_LAYOUT.filter(e=>!t.includes(e)).map(e=>"wc--hide-"+e).join(" "):""),v=(exports.layoutHideCls=h,(e,t)=>new RegExp(`wc--hide-${t}\\s*`).test(e)?e:e+" wc--hide-"+t),E=(exports.addLayoutHideCls=v,(e,t)=>!new RegExp(`wc--hide-${t}\\s*`).test(e)),k=(exports.hasLayoutArea=E,()=>{});exports.warn=k;