var s=function(e,t){var a=t.selectAllComponents(".wc__panel-container--incurrent");for(var n=0;n<a.length;n++){var r=a[n];var s="week"===e?r.getDataset().offset:0;r.setStyle({transition:"unset",transform:"translateY("+-s+"px)"})}};var i=function(e,t,a,n=!0){t="week"===e?t.min:"month"===e?t.main:t.max;n=!0===n?"all .28s ease":n||"unset",a.selectComponent("#panel").setStyle({transition:n,height:t+"px"});t=a.selectComponent(".wc__panel-container--current");var r="week"===e?t.getDataset().offset:0;t.setStyle({transition:n,transform:"translateY("+-r+"px)"}),s(e,a)};var l=function(e,t,a="unset",n=!1){n=n?"":".wc__panel-container--current ";n+=".wc__panel-schedules";var r=e.selectAllComponents(n);for(var s=0;s<r.length;s++)r[s].setStyle({transition:a,opacity:t})};var c=1;var h=2;var r=function(e){var t=e.selectAllComponents(".wc__panel-week--next");for(var a=0;a<t.length;a++)t[a].addClass("wc__panel-week--show")};var m=function(e){var t=e.selectAllComponents(".wc__panel-week--show");for(var a=0;a<t.length;a++)t[a].removeClass("wc__panel-week--show")};var e=function(e,t){var a=e.mark;var n=t.getState();a.gesture&&(n.y=e.changedTouches[0].pageY,n.deg=0,n.lastTime=e.timeStamp,n.lastX=e.changedTouches[0].pageX,n.lastY=n.y,n.check=0,"week"===a.view&&(n.currentHeight=a.min,r(t)),"month"===a.view&&(n.currentHeight=a.main),"schedule"===a.view)&&(n.currentHeight=a.max)};var t=function(e,t){var a=e.mark;if(a.gesture){var n=t.getState();if(!(n.check&h)){if(!n.check){var r=Math.abs(e.changedTouches[0].pageX-n.lastX);var s=Math.abs(e.changedTouches[0].pageY-n.lastY);if(s<r)return void(n.check=h);n.check=c}s=e.changedTouches[0].pageY-n.y;n.vy=(e.changedTouches[0].pageY-n.lastY)/(e.timeStamp-n.time),n.lastY=e.changedTouches[0].pageY,n.time=e.timeStamp;r=Math.floor(Math.min(a.dragMax,Math.max(a.min,n.currentHeight+4*s/5)));r=r==a.min||r==a.main||r==a.max?s<0?r-1:r+1:r,t.selectComponent("#panel").setStyle({transition:"unset",height:r+"px"});e=t.selectComponent(".wc__panel-container--current");var o=e.getDataset().offset;o=r>=a.main?0:o*(a.main-r)/(a.main-a.min);e.setStyle({transition:"unset",transform:"translateY("+-o+"px)"});e=0<s?"0.5":"-0.5";o=+e+n.deg;s=Math.max(-20,Math.min(o,20));n.deg=s,t.selectComponent("#control_1").setStyle({transition:"unset",transform:"rotate("+s+"deg)"}),t.selectComponent("#control_2").setStyle({transition:"unset",transform:"rotate("+-s+"deg)"});e=Math.max(0,Math.min(60,60*(a.main-r)/(a.main-a.min)));t.selectComponent("#view_bar").setStyle({transition:"unset","background-position":e+"rpx 0"}),r>a.main&&(o=Math.max(0,Math.min(1,(r-a.main)/(a.max-a.main))),l(t,o,"unset",!0))}}};var a=function(e,t){var a=e.mark;var n,r,s,o,c;a.gesture&&(o=t.getState(),!o.check||o.check&h||(e=e.changedTouches[0].pageY-o.y,s=Math.min(a.dragMax,Math.max(a.min,o.currentHeight+e)),n=a.min,n="week"===a.view?n<e?"month":"week":"schedule"===a.view?-n<e?"schedule":"month":e<-n?"week":n<e?"schedule":"month",e="week"===n,r="schedule"===n,c=e?a.min:r?a.max:a.main,c=Math.min(300,Math.abs((c-s)/o.vy)),s=c<160?"cubic-bezier(0.77, 1.36, 0.82, 1)":"cubic-bezier(0.61, 1, 0.88, 1)",i(n,a,t,"all .3s "+s),t.selectComponent("#control_1").setStyle({transition:"all .3s ease",transform:"rotate(0deg)"}),t.selectComponent("#control_2").setStyle({transition:"all .3s ease",transform:"rotate(0deg)"}),o=e?"var(--wc-operator-side)":0,t.selectComponent("#view_bar").setStyle({transition:"all .3s ease","background-position":o+" 0"}),c=r?1:0,l(t,c,"all .3s ease"),"week"===n&&m(t),t.callMethod("refreshView",{view:e?1:r?4:2})))};var n=function(e,t,a,n){n=n.getDataset().view;if("week"===n&&e){var r=a.selectAllComponents(".wc__panel-container");for(var s=0;s<r.length;s++){var o=r[s];var c=o.getDataset().offset;o.setStyle({transition:"unset",transform:"translateY("+-c+"px)"})}}};var o=function(e,t){e="week"===e?"var(--wc-operator-side)":0;t.selectComponent("#view_bar").setStyle({"background-position":e+" 0"})};var g=function(e,t,a){var n;e&&e!==t&&(t=a.selectComponent(".wc"),n="wc--"+e,t.hasClass(n)||(t.hasClass("wc--week")&&t.removeClass("wc--week"),t.hasClass("wc--month")&&t.removeClass("wc--month"),t.hasClass("wc--schedule")&&t.removeClass("wc--schedule"),t.addClass(n)),o(e,a))};var p=function(e,t){e=e.mark;var a="week"===e.view?"month":"week";var n="week"==a;n=n?1:2;i(a,e,t),o(a,t),t.callMethod("refreshView",{view:n})};var v=function(e,t,a){null!=e&&(e?(a.selectComponent(".wc__header").addClass("wc__header--hidden"),a.selectComponent(".wc__b").addClass("wc__b--hidden")):(a.selectComponent(".wc__header").removeClass("wc__header--hidden"),a.selectComponent(".wc__b").removeClass("wc__b--hidden")))};var u=function(e,t,a,n){e&&(n=n.getDataset(),i(e,n,a,!1),n="schedule"===e?1:0,l(a,n,"unset"))};var w=function(e,t,a,n){e&&(n=n.getDataset(),i(e,n,a),g(e,t,a),a.callMethod("refreshView",{view:"week"===e?1:"month"===e?2:4}))};var d=function(e){e=e.match(getRegExp("[0-9]+%?","g"));var t,a,n,r;return!e||e.length<3?null:(r=getRegExp("%$"),t=r.test(e[0])?parseFloat(e[0])/100:+e[0],a=r.test(e[1])?parseFloat(e[1])/100:+e[1],n=r.test(e[2])?parseFloat(e[2])/100:+e[2],r=e[3]?r.test(e[3])?parseFloat(e[3])/100:+e[3]:1,t=Math.min(255,t<1?Math.round(255*t):t),a=Math.min(255,a<1?Math.round(255*a):a),n=Math.min(255,n<1?Math.round(255*n):n),[t,a,n,r])};var f=function(e){e=e.replace(getRegExp("^#"),"");var t=1;3===e.length&&(e=e.replace(getRegExp("([a-f0-9])","gi"),"$1$1")),8===e.length&&(e=e.slice(0,6),t=Math.round(100*parseInt(e.slice(6,8),16)/255)/100);e=parseInt(e,16);var a=e>>16&255;var n=e>>8&255;e&=255;return[a,n,e,t]};var C=function(e){var t=Math.min(255,parseInt(10*(255-e[0])/9));var a=Math.min(255,parseInt(10*(255-e[1])/9));var n=Math.min(255,parseInt(10*(255-e[2])/9));return[t,a,n,e[3]||1]};var _=function(e,t){e=e.match(getRegExp("(?<="+t+" *:)([^;]+)"));return e&&e.length&&e[0]?e[0].replace(getRegExp("[\\r\\n]+","g"),"").trim():null};var k=function(e,t,a){var n=_(e,"--wc-primary");var r=_(e,"--wc-opt-color-light")||n;var s=_(e,"--wc-opt-color-dark")||n;var o=getRegExp("^rgba?");var c={};r&&(r=(o.test(r)?d:f)(r),r=C(r),c["--wc-op-color-light"]="rgba("+r.join(",")+")",c["--wc-op-bg-light"]="rgba("+r.slice(0,3).join(",")+",0.1)"),s&&(s=(o.test(s)?d:f)(s),s=C(s),c["--wc-op-color-dark"]="rgba("+s.join(",")+")",c["--wc-op-bg-dark"]="rgba("+s.slice(0,3).join(",")+",0.1)"),a.selectComponent(".wc").setStyle(c),n&&(r=_(e,"--wc-primary-2"),r||(n=(o.test(n)?d:f)(n),a.selectComponent(".wcc").setStyle({"--wc-primary-2":"rgba("+n.slice(0,3).join(",")+",0.1)"})))};module.exports={touchStart:e,touchMove:t,touchEnd:a,toggleView:p,viewChange:g,offsetChange:n,updateAnnualCls:v,initViewChange:u,transViewChange:w,styleChange:k};